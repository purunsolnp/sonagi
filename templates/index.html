<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê²€ì‚¬ ì¼ì • í™•ì¸</title>

    <!-- Google Tag -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RS9JDK6N0R"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-RS9JDK6N0R');
    </script>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5481687878637086" crossorigin="anonymous"></script>

    <!-- âœ… ìŠ¤íƒ€ì¼ -->
    <style>
        .result-box {
            font-size: 16px;
            line-height: 1.4;
            padding: 10px;
            border: 1px solid #ddd;
            background-color: #f9f9f9;
            max-height: 350px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <h2>ê²€ì‚¬ ì¼ì • í™•ì¸</h2>

    <form method="post">
        <label for="visit_date">ì´ˆì§„ ë‚ ì§œ ì„ íƒ:</label>
        <input type="date" id="visit_date" name="visit_date" required>

        <br><br>

        <label for="exam_list">ê²€ì‚¬ ëª©ë¡ ì…ë ¥ (ì‰¼í‘œë¡œ êµ¬ë¶„):</label>
        <div style="display: flex; align-items: center; gap: 10px;">
            <input type="text" id="exam_list" name="exam_list" value="{{ exam_list }}" 
                   style="width: 400px; height: 30px; font-size: 16px;">
            <button type="button" onclick="clearFields()" style="height: 34px; font-size: 16px;">Clear</button>
        </div>

        <br>

        <button type="submit" style="width: 180px; height: 40px; font-size: 18px;">ê²€ì‚¬ ì¼ì • í™•ì¸</button>
    </form>

    <a href="https://docs.google.com/spreadsheets/d/1om7_hy5ji_kUVpunx8b3LwyQDW1eZ1bhdkZHwGLWby8/edit?usp=sharing" target="_blank">
        <button style="font-size: 16px; margin-top: 10px;">ğŸ“„ ê²€ì‚¬ ëª©ë¡ ì—´ëŒ</button>
    </a>

    <div id="result" class="result-box" style="max-height: 600px; overflow-y: auto;">
        {{ result_text | safe }}
    </div>

    <hr>

    <!-- âœ… ìë™ ë‚ ì§œ ì…ë ¥ & ë¶™ì—¬ë„£ê¸° ìë™ ì‰¼í‘œ ë³€í™˜ -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let visitDateInput = document.getElementById("visit_date");
            let examInput = document.getElementById("exam_list");

            // ê¸°ë³¸ ë‚ ì§œë¥¼ ì˜¤ëŠ˜ë¡œ ì„¤ì •
            if (!visitDateInput.value) {
                let today = new Date();
                let yyyy = today.getFullYear();
                let mm = String(today.getMonth() + 1).padStart(2, '0');
                let dd = String(today.getDate()).padStart(2, '0');
                visitDateInput.value = `${yyyy}-${mm}-${dd}`;
            }

            // âœ… ë¶™ì—¬ë„£ê¸° ì‹œ ìë™ ì‰¼í‘œ ë³€í™˜
            examInput.addEventListener("paste", function (event) {
                event.preventDefault();
                let paste = (event.clipboardData || window.clipboardData).getData("text");

                paste = paste.replace(/[\n\r\t]+/g, ",");
                paste = paste.replace(/\s{2,}/g, ",");
                paste = paste.replace(/,+/g, ",");
                paste = paste.trim();

                // í˜„ì¬ ê°’ì— ì¶”ê°€
                let current = examInput.value;
                if (current && !current.trim().endsWith(",")) {
                    current += ", ";
                }
                examInput.value = current + paste;
            });
        });

        function clearFields() {
            document.getElementById("exam_list").value = "";
        }
    </script>

    <!-- ê¸°ë³¸ ì•ˆë‚´ ë©”ì‹œì§€ -->
    {% if not result %}
    <div class="result-box">
        <p>ğŸ“Œ ì‚¬ìš©ë²• ìœ íŠœë¸Œ ì„¤ëª… ë§í¬ : <a href="https://youtu.be/qjuiwCUTdjU" target="_blank">ì—¬ê¸° í´ë¦­</a></p>
        <p>ğŸ“Œ ì´ˆì§„ ì¼ìëŠ” í˜„ì¬ ë‚ ì§œê°€ ê¸°ë³¸ ì„¤ì •ì…ë‹ˆë‹¤. í™˜ìì˜ ì´ˆì§„ ë‚ ì§œë¡œ ë°”ê¿”ì„œ ì‚¬ìš©í•´ì£¼ì„¸ìš”.</p>
        <p>ğŸ“Œ ê²€ì‚¬ ê²°ê³¼ë¥¼ ë¹ˆ ì¹¸ìœ¼ë¡œ ì„¤ì •í•˜ê³  ê²€ì‚¬ ì¼ì • ë²„íŠ¼ì„ ëˆŒë¦¬ë©´ ì„¤ì •í•œ ì´ˆì§„ì¼ ê¸°ì¤€ 7ê°œì›”ì°¨ê°€ ë˜ëŠ” ë‚ ì„ ì•Œë ¤ì¤ë‹ˆë‹¤.</p>
        <p>ğŸ“Œ ì´ˆì§„ ë‚ ì§œë¥¼ ì„ íƒí•˜ê³ , ì‹œí–‰í•  ê²€ì‚¬ë¥¼ ì‰¼í‘œë¡œ êµ¬ë¶„í•˜ì—¬ ì…ë ¥í•˜ë©´ ê²€ì‚¬ ê°¯ìˆ˜, í‰ê°€ í•­ëª©, ìê°€ ì„ìƒê°€ ì—¬ë¶€ê°€ íŒë‹¨ë˜ì–´ ê²°ê³¼ë¥¼ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.</p>
        <p>ğŸ“Œ ë³´í˜¸ì ì‘ì„±ì˜ ìê°€ ê²€ì‚¬ëŠ” 'ìê°€ê²€ì‚¬'ë¡œ ë¶„ë¥˜í•˜ì—¬ ì œì‘í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
        <p>ğŸ“Œ ë³¸ í˜ì´ì§€ëŠ” ì„ ìƒë‹˜ë“¤ì˜ ì§„ë£Œë¥¼ ë•ê¸° ìœ„í•´ ìë°œì ìœ¼ë¡œ ì œì‘ë˜ì—ˆìœ¼ë©°, ì´ë¡œ ì¸í•´ ë°œìƒí•œ ì±…ì„ì€ ì‚¬ìš©ìì˜ ëª«ì„ì„ ê³ ì§€í•©ë‹ˆë‹¤.</p>
        <p>ğŸ“Œ ê°œì¸ì •ë³´ ë³´í˜¸ë²•ì„ ì¤€ìˆ˜í•˜ë©°, ì–´ë–¤ ë°ì´í„°ë„ ì €ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
        <p>ğŸ“Œ ê²€ì‚¬ ëª…ì¹­ì€ ì²™ë„ ê³ ì‹œ ê¸°ì¤€ìœ¼ë¡œ ì •ì˜í•˜ì˜€ìŠµë‹ˆë‹¤, ìì„¸í•œ ê²ƒì€ ê²€ì‚¬ ëª©ë¡ ì—´ëŒì„ í™•ì¸í•´ì£¼ì„¸ìš”. (ì˜ˆì™¸: ASRS â†’ K-ASRS ë“±).</p>
    </div>
    {% endif %}

    <hr>

    <div style="text-align: center; margin-top: 40px;">
        <h3>â˜• ì œì‘ì í›„ì›í•˜ê¸°</h3>
        <p style="font-size: 14px;">
            ë„ì›€ì´ ë˜ì…¨ë‹¤ë©´ ì•„ë˜ í”Œë«í¼ì„ í†µí•´ ì‘ì›í•´ì£¼ì‹œë©´ ì„œë²„ ìš´ì˜ì— í° í˜ì´ ë©ë‹ˆë‹¤.
        </p>
        <a href="https://buymeacoffee.com/sonagi" target="_blank">
          <button style="background-color: #FFDD00; color: black; border: none; padding: 10px 20px; font-size: 16px; border-radius: 6px; cursor: pointer;">
            ë”°ëœ»í•œ í›„ì› ê°ì‚¬ë“œë¦½ë‹ˆë‹¤
          </button>
        </a>
    </div>
</body>
</html>